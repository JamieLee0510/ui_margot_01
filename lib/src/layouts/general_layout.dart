import 'package:flutter/material.dart';
import 'package:flutter_screenutil/flutter_screenutil.dart';
import 'package:flutter_svg/svg.dart';

class GeneralLayout extends StatefulWidget {
  const GeneralLayout({Key? key, required this.bodyWidget}) : super(key: key);
  final Widget bodyWidget;
  @override
  State<GeneralLayout> createState() => _GeneralLayoutState();
}

class _GeneralLayoutState extends State<GeneralLayout> {
  int currentIndex = 0;

  setBottomBarIndex(index) {
    setState(() {
      currentIndex = index;
    });
  }

  SvgPicture buttonBar() {
    const String rawSvg =
        '''<svg width="390" height="98" viewBox="0 0 390 98" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M389.5 44V88C389.5 93.2467 385.247 97.5 380 97.5H10C4.75329 97.5 0.5 93.2467 0.5 88V44C0.5 19.9757 19.9821 0.5 44.0066 0.5H44.1601H44.3135H44.4668H44.62H44.7731H44.9262H45.0792H45.2322H45.385H45.5378H45.6905H45.8431H45.9957H46.1482H46.3006H46.453H46.6053H46.7575H46.9096H47.0617H47.2137H47.3657H47.5175H47.6693H47.8211H47.9728H48.1244H48.2759H48.4274H48.5788H48.7302H48.8814H49.0327H49.1838H49.3349H49.486H49.6369H49.7878H49.9387H50.0895H50.2402H50.3909H50.5415H50.692H50.8425H50.993H51.1433H51.2937H51.4439H51.5941H51.7443H51.8944H52.0444H52.1944H52.3443H52.4942H52.644H52.7938H52.9435H53.0932H53.2428H53.3924H53.5419H53.6913H53.8408H53.9901H54.1394H54.2887H54.4379H54.5871H54.7362H54.8852H55.0343H55.1832H55.3322H55.4811H55.6299H55.7787H55.9274H56.0761H56.2248H56.3734H56.522H56.6705H56.819H56.9675H57.1159H57.2642H57.4126H57.5609H57.7091H57.8573H58.0055H58.1536H58.3017H58.4498H58.5978H58.7458H58.8937H59.0416H59.1895H59.3373H59.4851H59.6329H59.7806H59.9283H60.076H60.2236H60.3712H60.5188H60.6664H60.8139H60.9613H61.1088H61.2562H61.4036H61.551H61.6983H61.8456H61.9929H62.1401H62.2873H62.4345H62.5817H62.7289H62.876H63.0231H63.1701H63.3172H63.4642H63.6112H63.7582H63.9051H64.0521H64.199H64.3459H64.4927H64.6396H64.7864H64.9332H65.08H65.2268H65.3735H65.5203H65.667H65.8137H65.9604H66.107H66.2537H66.4003H66.5469H66.6935H66.8401H66.9867H67.1333H67.2798H67.4264H67.5729H67.7194H67.8659H68.0124H68.1589H68.3054H68.4518H68.5983H68.7447H68.8912H69.0376H69.184H69.3304H69.4768H69.6232H69.7696H69.916H70.0624H70.2088H70.3551H70.5015H70.6479H70.7942H70.9406H71.087H71.2333H71.3797H71.526H71.6724H71.8187H71.9651H72.1114H72.2578H72.4042H72.5505H72.6969H72.8432H72.9896H73.136H73.2823H73.4287H73.5751H73.7215H73.8679H74.0143H74.1607H74.3071H74.4535H74.6H74.7464H74.8928H75.0393H75.1857H75.3322H75.4787H75.6252H75.7717H75.9182H76.0647H76.2113H76.3578H76.5044H76.651H76.7975H76.9441H77.0908H77.2374H77.384H77.5307H77.6774H77.8241H77.9708H78.1175H78.2643H78.411H78.5578H78.7046H78.8515H78.9983H79.1452H79.2921H79.439H79.5859H79.7328H79.8798H80.0268H80.1738H80.3209H80.4679H80.615H80.7621H80.9093H81.0564H81.2036H81.3508H81.4981H81.6454H81.7927H81.94H82.0873H82.2347H82.3821H82.5296H82.6771H82.8246H82.9721H83.1197H83.2673H83.4149H83.5626H83.7103H83.858H84.0057H84.1535H84.3014H84.4492H84.5971H84.7451H84.8931H85.0411H85.1891H85.3372H85.4853H85.6335H85.7817H85.9299H86.0782H86.2265H86.3749H86.5233H86.6717H86.8202H86.9687H87.1173H87.2659H87.4146H87.5633H87.712H87.8608H88.0096H88.1585H88.3074H88.4564H88.6054H88.7545H88.9036H89.0527H89.2019H89.3512H89.5005H89.6498H89.7992H89.9487H90.0982H90.2478H90.3974H90.547H90.6967H90.8465H90.9963H91.1462H91.2961H91.4461H91.5961H91.7462H91.8963H92.0465H92.1968H92.3471H92.4975H92.6479H92.7984H92.9489H93.0995H93.2502H93.4009H93.5517H93.7025H93.8534H94.0044H94.1554H94.3065H94.4576H94.6088H94.7601H94.9114H95.0628H95.2143H95.3658H95.5174H95.6691H95.8208H95.9726H96.1245H96.2764H96.4284H96.5805H96.7326H96.8848H97.0371H97.1894H97.3419H97.4943H97.6469H97.7995H97.9522H98.105H98.2578H98.4108H98.5637H98.7168H98.8699H99.0232H99.1765H99.3298H99.4833H99.6368H99.7904H99.944H100.098H100.252H100.406H100.56H100.714H100.868H101.022H101.176H101.331H101.485H101.64H101.794H101.949H102.104H102.259H102.414H102.569H102.724H102.879H103.034H103.19H103.345H103.501H103.656H103.812H103.968H104.124H104.28H104.436H104.592H104.748H104.905H105.061H105.218H105.374H105.531H105.688H105.845H106.002H106.159H106.316H106.473H106.631H106.788H106.946H107.104H107.261H107.419H107.577H107.735H107.893H108.052H108.21H108.368H108.527H108.686H108.844H109.003H109.162H109.321H109.48H109.64H109.799H109.959H110.118H110.278H110.438H110.597H110.757H110.918H111.078H111.238H111.398H111.559H111.72H111.88H112.041H112.202H112.363H112.524H112.686H112.847H113.009H113.17H113.332H113.494H113.656H113.818H113.98H114.142H114.305H114.467H114.63H114.793H114.956H115.119H115.282H115.445H115.608H115.772H115.935H116.099H116.263H116.427H116.591H116.755H116.919H117.084H117.248H117.413H117.578H117.743H117.908H118.073H118.238H118.404H118.569H118.735H118.901H119.067H119.233H119.399H119.565H119.732H119.898H120.065H120.232H120.399H120.566H120.733H120.9H121.068H121.235H121.403H121.571H121.739C135.189 0.5 147.78 7.15626 155.345 18.2768L155.963 19.1852C172.374 43.308 208.041 42.9819 224.008 18.5631C231.378 7.29264 243.935 0.5 257.401 0.5H346C370.024 0.5 389.5 19.9756 389.5 44Z" fill="white" fill-opacity="0.16" stroke="url(#paint0_linear_19_128)"/>
<defs>
<linearGradient id="paint0_linear_19_128" x1="195" y1="4.673e-07" x2="195" y2="98" gradientUnits="userSpaceOnUse">
<stop stop-color="white" stop-opacity="0.56"/>
<stop offset="1" stop-color="#929292" stop-opacity="0"/>
</linearGradient>
</defs>
</svg>''';
    final svgData = SvgPicture.string(
      rawSvg,
      fit: BoxFit.fitWidth,
    );
    return svgData;
  }

  @override
  Widget build(BuildContext context) {
    double fullWidth = MediaQuery.of(context).size.width;
    double fullHeight = MediaQuery.of(context).size.height;

    Widget bigCircle = Container(
      width: 300.w,
      height: 300.w,
      decoration: const BoxDecoration(
        color: Color.fromRGBO(151, 192, 152, 0.13),
        shape: BoxShape.circle,
      ),
    );
    Widget smallCircle = Container(
      width: 180.w,
      height: 180.w,
      decoration: const BoxDecoration(
        color: Color.fromRGBO(214, 124, 183, 0.07),
        shape: BoxShape.circle,
      ),
    );
    return Scaffold(
      // backgroundColor: Colors.white,
      body: SafeArea(
        top: false,
        bottom: false,
        child: Stack(
          children: [
            Container(
              width: fullWidth,
              height: fullHeight,
              decoration: const BoxDecoration(
                gradient: LinearGradient(
                  begin: Alignment.topLeft,
                  end: Alignment.bottomRight,
                  colors: <Color>[
                    Color(0xffBDD5E7),
                    Color(0xff9DA2CA),
                  ],
                ),
              ),
            ),
            Positioned(top: 200.h, right: 100.w, child: smallCircle),
            Positioned(top: 0, right: -60.w, child: bigCircle),
            Positioned(
                left: 0,
                right: 0,
                bottom: 0,
                child: Center(
                    child: SizedBox(
                        width: fullWidth, height: 90.h, child: buttonBar()))),
            Positioned(child: widget.bodyWidget)
          ],
        ),
      ),
    );
  }
}
